(()=>{"use strict";const e=wp.blocks,t=wp.blockEditor,n=wp.components,r=wp.element,i=function(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)},o=function(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)},s=function(e,t){return function(n,r,s,a=10){const l=e[t];if(!o(n))return;if(!i(r))return;if("function"!=typeof s)return void console.error("The hook callback must be a function.");if("number"!=typeof a)return void console.error("If specified, the hook priority must be a number.");const c={callback:s,priority:a,namespace:r};if(l[n]){const e=l[n].handlers;let t;for(t=e.length;t>0&&!(a>=e[t-1].priority);t--);t===e.length?e[t]=c:e.splice(t,0,c),l.__current.forEach((e=>{e.name===n&&e.currentIndex>=t&&e.currentIndex++}))}else l[n]={handlers:[c],runs:0};"hookAdded"!==n&&e.doAction("hookAdded",n,r,s,a)}},a=function(e,t,n=!1){return function(r,s){const a=e[t];if(!o(r))return;if(!n&&!i(s))return;if(!a[r])return 0;let l=0;if(n)l=a[r].handlers.length,a[r]={runs:a[r].runs,handlers:[]};else{const e=a[r].handlers;for(let t=e.length-1;t>=0;t--)e[t].namespace===s&&(e.splice(t,1),l++,a.__current.forEach((e=>{e.name===r&&e.currentIndex>=t&&e.currentIndex--})))}return"hookRemoved"!==r&&e.doAction("hookRemoved",r,s),l}},l=function(e,t){return function(n,r){const i=e[t];return void 0!==r?n in i&&i[n].handlers.some((e=>e.namespace===r)):n in i}},c=function(e,t,n,r){return function(i,...o){const s=e[t];s[i]||(s[i]={handlers:[],runs:0}),s[i].runs++;const a=s[i].handlers;if(!a||!a.length)return n?o[0]:void 0;const l={name:i,currentIndex:0};return(r?async function(){try{s.__current.add(l);let e=n?o[0]:void 0;for(;l.currentIndex<a.length;){const t=a[l.currentIndex];e=await t.callback.apply(null,o),n&&(o[0]=e),l.currentIndex++}return n?e:void 0}finally{s.__current.delete(l)}}:function(){try{s.__current.add(l);let e=n?o[0]:void 0;for(;l.currentIndex<a.length;)e=a[l.currentIndex].callback.apply(null,o),n&&(o[0]=e),l.currentIndex++;return n?e:void 0}finally{s.__current.delete(l)}})()}},u=function(e,t){return function(){var n;const r=e[t],i=Array.from(r.__current);return null!==(n=i.at(-1)?.name)&&void 0!==n?n:null}},d=function(e,t){return function(n){const r=e[t];return void 0===n?r.__current.size>0:Array.from(r.__current).some((e=>e.name===n))}},h=function(e,t){return function(n){const r=e[t];if(o(n))return r[n]&&r[n].runs?r[n].runs:0}};class m{constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=s(this,"actions"),this.addFilter=s(this,"filters"),this.removeAction=a(this,"actions"),this.removeFilter=a(this,"filters"),this.hasAction=l(this,"actions"),this.hasFilter=l(this,"filters"),this.removeAllActions=a(this,"actions",!0),this.removeAllFilters=a(this,"filters",!0),this.doAction=c(this,"actions",!1,!1),this.doActionAsync=c(this,"actions",!1,!0),this.applyFilters=c(this,"filters",!0,!1),this.applyFiltersAsync=c(this,"filters",!0,!0),this.currentAction=u(this,"actions"),this.currentFilter=u(this,"filters"),this.doingAction=d(this,"actions"),this.doingFilter=d(this,"filters"),this.didAction=h(this,"actions"),this.didFilter=h(this,"filters")}}const p=new m,{addAction:f,addFilter:g,removeAction:v,removeFilter:A,hasAction:b,hasFilter:y,removeAllActions:_,removeAllFilters:w,doAction:x,doActionAsync:F,applyFilters:k,applyFiltersAsync:E,currentAction:I,currentFilter:C,doingAction:N,doingFilter:L,didAction:T,didFilter:H,actions:Z,filters:j}=p;var z=function(){return z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},z.apply(this,arguments)};function O(e){return e.toLowerCase()}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var S=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],$=/[^A-Z0-9]+/gi;function B(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce((function(e,t){return e.replace(t,n)}),e)}function R(e,t){var n=e.charAt(0),r=e.substr(1).toLowerCase();return t>0&&n>="0"&&n<="9"?"_"+n+r:""+n.toUpperCase()+r}const P=(e,t)=>{const n=t.displayName||t.name||"Component";return`${r=null!=e?e:"",void 0===i&&(i={}),function(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,r=void 0===n?S:n,i=t.stripRegexp,o=void 0===i?$:i,s=t.transform,a=void 0===s?O:s,l=t.delimiter,c=void 0===l?" ":l,u=B(B(e,r,"$1\0$2"),o,"\0"),d=0,h=u.length;"\0"===u.charAt(d);)d++;for(;"\0"===u.charAt(h-1);)h--;return u.slice(d,h).split("\0").map(a).join(c)}(r,z({delimiter:"",transform:R},i))}(${n})`;var r,i};(0,e.registerBlockType)("custom/post-heading-navigation",{title:"Post Heading Navigation",icon:"list-view",category:"widgets",attributes:{maxHeadingLevel:{type:"number",default:2}},edit({attributes:e,setAttributes:i}){const{maxHeadingLevel:o}=e;return wp.element.createElement(r.Fragment,null,wp.element.createElement(t.InspectorControls,null,wp.element.createElement(n.PanelBody,{title:"Navigation Settings"},wp.element.createElement(n.SelectControl,{label:"Maximum Heading Level",value:o,options:[{label:"H2",value:2},{label:"H3",value:3},{label:"H4",value:4}],onChange:e=>i({maxHeadingLevel:parseInt(e,10)})}))),wp.element.createElement("div",null,`Navigation Menu up to H${o}`))},save:()=>null});const M=(U=e=>i=>{if("core/heading"!==i.name)return wp.element.createElement(e,i);const{attributes:o,setAttributes:s}=i,{navigationLabel:a,excludeFromNavigation:l}=o;return wp.element.createElement(r.Fragment,null,wp.element.createElement(e,i),wp.element.createElement(t.InspectorControls,null,wp.element.createElement(n.PanelBody,{title:"Navigation Settings"},wp.element.createElement(n.TextControl,{label:"Navigation Label",value:a,onChange:e=>s({navigationLabel:e}),help:"Custom text for this heading in the navigation."}),wp.element.createElement(n.ToggleControl,{label:"Exclude from Navigation",checked:l,onChange:e=>s({excludeFromNavigation:e})}))))},e=>{const t=U(e);return t.displayName=P("withInspectorControls",e),t});var U;g("blocks.registerBlockType","custom/heading-attributes",(function(e,t){return"core/heading"===t&&(e.attributes={...e.attributes,navigationLabel:{type:"string",default:""},excludeFromNavigation:{type:"boolean",default:!1}}),e})),g("editor.BlockEdit","custom/with-inspector-controls",M)})();